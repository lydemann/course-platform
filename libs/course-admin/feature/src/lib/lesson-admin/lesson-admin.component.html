<h1 class="mb-m">Edit Course Lesson</h1>

<app-button (click)="goBack()" color="accent">Back to sections</app-button>
<ng-container
  *ngIf="
    !(isAddingResource$ | async) && (formGroup$ | async) as formGroup;
    else loading
  "
>
  <app-lesson-admin-form
    class="mt-l"
    *ngIf="lesson$ | async as lesson"
    [formGroup]="formGroup"
    (save)="submit($event, lesson)"
    (deleteClicked)="onDelete(lesson)"
    (addResourceClicked)="onAddResourceClicked()"
    (deleteResourceClicked)="onDeleteResourceClicked($event, formGroup)"
  ></app-lesson-admin-form>
</ng-container>

<ng-template #loading>
  <app-spinner class="center-in-parent"></app-spinner>
</ng-template>
